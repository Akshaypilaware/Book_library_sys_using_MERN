<link rel="stylesheet" href="../public/css/styles.css">

<% if (url !== user.id) { %>
  <div class="display-5 text-center mt-3">Unauthorized Access</div>
<% } else { %>
  <div class="display-5 text-center mt-3 mb-4">Borrow History</div>
  <div class="container mb-4">
    <div class="row d-flex justify-content-center">
      <div class="col-md-8">
        <% if(borrowHistory.length === 0) { %>
          <p class="text-center mb-0">No borrowed books yet.</p>
        <% } else { %>
          <% for( let i = 0; i < borrowHistory.length; i++ ) { %>
            <div class="bg-light card mb-3">
              <div class="card-body">
                <% while(borrowHistory[i].borrow_date.getTime() === borrowHistory[i+1].borrow_date.getTime()) { %>
                  <p>Borrow Date: <%= new Intl.DateTimeFormat('en-GB', { year: 'numeric', month: 'long', day: '2-digit'}).format(borrowHistory[i].borrow_date) %></p>
                  <img src="<%= borrowHistory[i].borrowed_book.coverImagePath %>" alt="<%= borrowHistory[i].borrowed_book.title %>" width="50" height="70">
                  <span><%= borrowHistory[i].borrowed_book.title %></span>
                  <span class="form-text">- (Return Date: <%= new Intl.DateTimeFormat('en-GB', { year: 'numeric', month: 'long', day: '2-digit'}).format(borrowHistory[i].return_date) %>)</span>
                <% } %>
              </div>
            </div>
          <% } %>
        <% } %>
      </div>
    </div>
  </div>
<% } %>